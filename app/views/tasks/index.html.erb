<div class= "row d-flex align-items-center">
  <div class="col-4">
    <h1><%= I18n.t('task_index') %></h1>
  </div>
  <div class="col-6">
    <%= link_to I18n.t('create_task'), new_task_url, class:"btn btn-primary" %>
  </div>
</div>
<br>

<div>
  <div class = <%= sorted_by?('created_at')%>>
    <%= sort_by '作成日',  'created_at' %>
  </div> |
  <div class = <%=sorted_by?('name')%>>
    <%= sort_by 'タスク名', 'name'      %>
  </div> |
  <div class = <%=sorted_by?('start_date')%>>
    <%= sort_by '取り掛り', 'start_date' %>
  </div> |
  <div class = <%=sorted_by?('necessary_days')%>> 
    <%= sort_by '必要日数', 'necessary_days' %>
  </div> |
  <div class = <%=sorted_by?('progress')%>>
    <%= sort_by '進行状況', 'progress'   %>
  </div> |
  <div class = <%=sorted_by?('priority')%>>
    <%= sort_by '重要度',  'priority'   %>
  </div>
</div>

<div class="tasks">
  <% @tasks.each do |task| %>
    <div class = "task">
      <div class="card mb-3 bg-primary">
        <%= link_to task, class: "card-body text-white" do %>
          <div>
            <h4><%= task.name%></h4>
          </div>

          <div>
            <span><%= Task.human_attribute_name(:created_date) %></span>
            <%= print_month_day_wday task.created_at %>
          </div>

          <% if task.description.present? %>
            <div>
              <span><%= Task.human_attribute_name(:description) %></span>
              <%= task.description %>
            </div>
          <% end %>

          <div>
            <span><%= Task.human_attribute_name(:necessary_days) %></span>
            <%= task.necessary_days %>日
          </div>

          <div>
            <span><%= Task.human_attribute_name(:period_on_task) %></span>
            <%  deadline_date = task.start_date + task.necessary_days - 1  %>
            <%= print_month_day_wday task.start_date %> ~ 
            <%= print_month_day_wday deadline_date %>
          </div>

          <div>
            <span><%= Task.human_attribute_name(:progress) %></span>
            <%= task.progress %>
          </div>
          
          <div>
            <span><%= Task.human_attribute_name(:priority) %></span>
            <%= task.priority%>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>