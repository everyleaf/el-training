<h1>All tasks</h1>
<div><%= link_to 'タスクを作成', new_task_url %>
<br>

<%= form_with scope: :search, url: tasks_path, method: :get do |f| %>
  <%= f.label(:priority, '優先度') %>
  <%= f.collection_check_boxes :priority, Task.priorities, :first, :first, {include_hidden: false} %>
  <%= f.label(:progress, '実行状況') %>
  <%= f.collection_check_boxes :progress, Task.progresses, :first, :first, {include_hidden: false} %>
  <%= f.submit '検索', class: "btn btn-primary" %>
<% end %>
<ul class="tasks">
  <% @tasks.each do |task| %>
    <li>
      <div>
        <span>タスク名</span>
        <span><%= task.name%></span>
        <span><%= link_to "詳細",  task %></span>
      </div>

      <% if task.description.present? %>
        <div>
          <span>説明文</span>
          <%= task.description %>
        </div>
      <% end %>

      <div>
        <span>必要日数</span>
        <%= task.necessary_days %>日
      </div>

      <div>
        <span>取り掛かり期間</span>
        <%  deadline_date = task.start_date + task.necessary_days - 1  %>
        <%= print_month_day_wday task.start_date %> ~ 
        <%= print_month_day_wday deadline_date %>
      </div>

      <div>
        <span>実行状況</span>
        <%= task.progress %>
      </div>
      
      <div>
        <span>重要度</span>
        <%= task.priority%>
      </div>
      
      <br>
    </li>
  <% end %>
</ul>