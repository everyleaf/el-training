<h1>All tasks</h1>
<div><%= link_to 'タスクを作成', new_task_url %>
<br><br>

<p>
  並び替え
  <br>
  <%= link_to 'タスク名', tasks_path(sort: 'name',           direction: get_sort_direction('name'))           %> |
  <%= link_to '取り掛り', tasks_path(sort: 'start_date',     direction: get_sort_direction('start_date'))     %> | 
  <%= link_to '必要日数', tasks_path(sort: 'necessary_days', direction: get_sort_direction('necessary_days')) %> | 
  <%= link_to '実行度',   tasks_path(sort: 'progress',      direction: get_sort_direction('progress'))       %> | 
  <%= link_to '重要度',   tasks_path(sort: 'priority',      direction: get_sort_direction('priority'))       %>
</p>

<ul class="tasks">
  <% @tasks.each do |task| %>
    <li>
      <div>
        <span>タスク名</span>
        <span><%= task.name%></span>
        <span><%= link_to "詳細",  task %></span>
      </div>

      <% if task.description.present? %>
        <div>
          <span>説明文</span>
          <%= task.description %>
        </div>
      <% end %>

      <div>
        <span>必要日数</span>
        <%= task.necessary_days %>日
      </div>

      <div>
        <span>取り掛かり期間</span>
        <%  deadline_date = task.start_date + task.necessary_days - 1  %>
        <%= print_month_day_wday task.start_date %> ~ 
        <%= print_month_day_wday deadline_date %>
      </div>

      <div>
        <span>実行状況</span>
        <%= task.progress %>
      </div>
      
      <div>
        <span>重要度</span>
        <%= task.priority%>
      </div>
      
      <br>
    </li>
  <% end %>
</ul>